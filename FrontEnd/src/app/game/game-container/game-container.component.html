<div id="container">
  <div *ngIf="(connectionState$ | async) === 'Disconnected' && !(authBusy$ | async)" >
    <button mat-button color="primary" (click)="connect()">CONNECT</button>
  </div>
  <div *ngIf="(connectionState$ | async) === 'Connecting'" id="connecting-container">
    <mat-spinner color="accent"></mat-spinner>
    <p>Connecting to server</p>
  </div>

  <div *ngIf="registered$ | async; else notRegistered" id="game-container">
    <app-stats></app-stats>

    <!-- round is active -->
    <ng-container *ngIf="roundActive$ | async; else roundEnded">
      <!-- player has guessed the word -->
      <ng-container *ngIf="guessedCorrectly$ | async; else guess">
        <h2>You guessed it!</h2>
        <p>Waiting for other players</p>
      </ng-container>

      <!-- player is guessing the word -->
      <ng-template #guess>
        <app-hint></app-hint>
        <app-guess></app-guess>
        <app-keyboard *ngIf="showKeyboard"></app-keyboard>
      </ng-template>
    </ng-container>

    <!-- round ended - post round summary -->
    <ng-template #roundEnded>
      <app-round-end-summary></app-round-end-summary>
    </ng-template>

    <app-countdown
      *ngIf="interval$ | async as interval"
      [startDate]="interval.startDate"
      [endDate]="interval.endDate"
    ></app-countdown>
  </div>
  <ng-template #notRegistered>
    <h3>Not registered with the game server :(</h3>
  </ng-template>
</div>
